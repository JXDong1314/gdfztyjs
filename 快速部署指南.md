# ⚡ 快速部署指南

## 5分钟部署到腾讯云

### 📋 准备清单

- [ ] 腾讯云账号（[注册地址](https://cloud.tencent.com/)）
- [ ] 已安装 Node.js（[下载地址](https://nodejs.org/)）
- [ ] 项目文件（已准备好）

### 🚀 部署步骤

#### 第一步：创建云环境

1. 访问 [CloudBase控制台](https://console.cloud.tencent.com/tcb)
2. 点击**新建环境**
3. 填写环境信息：
   - 环境名称：`quiz-system`（可自定义）
   - 计费方式：选择**按量计费**（有免费额度）
4. 点击**立即开通**
5. **记录环境ID**（格式如：`quiz-system-xxx`）

#### 第二步：运行部署脚本

**Windows 用户（推荐使用 PowerShell）：**

```powershell
# 右键以管理员身份打开 PowerShell
# 进入项目目录
cd C:\Users\Administrator\Desktop\通用技术刷题系统online

# 运行部署脚本
.\deploy.ps1
```

**Windows 用户（使用 CMD）：**

```cmd
# 双击运行
deploy.bat
```

**Linux/Mac 用户：**

```bash
# 赋予执行权限
chmod +x deploy.sh

# 运行部署脚本
./deploy.sh
```

#### 第三步：按提示操作

1. **安装 CloudBase CLI**（首次使用时自动安装）
   ```
   ⚠️  未检测到 CloudBase CLI，正在安装...
   ✅ CloudBase CLI 安装成功
   ```

2. **登录腾讯云账号**
   ```
   ⚠️  未登录，请先登录腾讯云账号
   ```
   - 会自动打开浏览器
   - 扫码或输入账号密码登录
   - 授权成功后回到命令行

3. **输入环境ID**
   ```
   请输入你的 CloudBase 环境 ID：
   ENV_ID: quiz-system-xxx
   ```
   - 输入第一步创建的环境ID
   - 按回车确认

4. **确认部署**
   ```
   📦 准备部署到环境: quiz-system-xxx
   
   将要部署的文件：
     - index.html (主页面)
     - 2021-2024年试题文件夹及图片
   
   确认部署？(y/n): y
   ```

5. **等待部署完成**
   ```
   🚀 开始部署...
   [████████████████████████████████████] 100%
   
   ✅ 部署成功！
   
   🌐 访问地址：
      https://quiz-system-xxx.tcloudbaseapp.com
   ```

#### 第四步：访问网站

在浏览器中打开部署成功后显示的地址即可！

---

## 🔧 常见问题

### Q1: PowerShell 提示"无法加载脚本"

**解决方法：**

```powershell
# 以管理员身份运行 PowerShell
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser
# 选择 Y 确认
```

### Q2: 提示"npm 不是内部或外部命令"

**原因：** 未安装 Node.js

**解决方法：**
1. 访问 https://nodejs.org/ 下载 LTS 版本
2. 安装完成后重启命令行
3. 验证：`node --version` 和 `npm --version`

### Q3: 登录失败

**解决方法：**
1. 确保浏览器中已登录腾讯云
2. 重新运行 `cloudbase login`
3. 或手动登录：
   ```bash
   cloudbase login --key
   ```

### Q4: 部署后访问404

**可能原因：**
1. CDN缓存未刷新（等待5-10分钟）
2. 环境ID输入错误

**解决方法：**
- 使用无痕模式访问
- 在 CloudBase 控制台检查文件是否上传成功

### Q5: 图片显示不出来

**解决方法：**
1. 检查浏览器控制台是否有错误
2. 确认所有文件夹都已上传
3. 在 CloudBase 控制台 → 静态网站托管 → 文件管理 中检查

---

## 💡 高级技巧

### 1️⃣ 设置环境变量（避免每次输入）

**Windows PowerShell：**
```powershell
$env:ENV_ID = "quiz-system-xxx"
.\deploy.ps1
```

**Windows CMD：**
```cmd
set ENV_ID=quiz-system-xxx
deploy.bat
```

**Linux/Mac：**
```bash
export ENV_ID=quiz-system-xxx
./deploy.sh
```

### 2️⃣ 使用 npm 脚本部署

```bash
# 设置环境变量
export ENV_ID=quiz-system-xxx  # Linux/Mac
set ENV_ID=quiz-system-xxx     # Windows CMD
$env:ENV_ID="quiz-system-xxx"  # Windows PowerShell

# 部署
npm run deploy
```

### 3️⃣ 绑定自定义域名

1. 进入 CloudBase 控制台
2. 选择你的环境 → 静态网站托管 → 设置
3. 点击**域名管理** → **添加域名**
4. 输入你的域名（如：quiz.yourdomain.com）
5. 在域名服务商处添加 CNAME 记录：
   ```
   类型: CNAME
   主机记录: quiz
   记录值: quiz-system-xxx.tcloudbaseapp.com
   TTL: 600
   ```
6. 等待解析生效（约10分钟）

### 4️⃣ 开启 HTTPS 强制跳转

1. CloudBase 控制台 → 静态网站托管 → 设置
2. 找到**强制HTTPS**选项
3. 开启开关

### 5️⃣ 配置 CDN 加速

1. CloudBase 控制台 → 静态网站托管 → 设置
2. 点击**CDN加速配置**
3. 选择合适的加速区域
4. 开启加速

---

## 📊 费用预估

### 免费额度（每月）

- 存储空间：5GB
- 流量：5GB
- 适用场景：**个人学习、小规模使用**

### 收费标准（超出免费额度后）

- 存储：¥0.0043/GB/天
- 流量：¥0.18/GB
- CDN：¥0.18/GB

### 使用建议

- 个人使用：**完全免费**（远低于5GB限制）
- 班级使用（50人以内）：**基本免费或极低费用**（< ¥10/月）
- 学校使用（500人）：**约 ¥50-100/月**

💡 **省钱技巧：**
- 开启 CDN 加速可降低流量费用
- 图片资源建议使用 WebP 格式
- 定期清理无用文件

---

## 📞 获取帮助

遇到问题？

1. 查看完整文档：[部署说明.md](部署说明.md)
2. 查看腾讯云文档：https://cloud.tencent.com/document/product/876
3. 提交 Issue（如果使用 Git 仓库）

---

**祝你部署顺利！🎉**

