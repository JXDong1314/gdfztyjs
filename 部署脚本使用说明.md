# 📘 部署脚本使用说明

## 🎯 你的环境信息

- **环境ID**: `gdfztyjs-2gpucv007e6d0c87`
- **访问地址**: https://gdfztyjs-2gpucv007e6d0c87.tcloudbaseapp.com
- **CLI命令**: `tcb`（腾讯云CLI工具）

---

## 🚀 快速部署（推荐）

### 方法一：双击运行

**直接部署.bat** - 最简单的方式
- 双击运行即可
- 自动上传所有文件到云端
- 无需任何输入

### 方法二：命令行运行

```cmd
直接部署.bat
```

---

## 📦 可用的脚本文件

### 1️⃣ 直接部署.bat
**用途**：一键部署整个项目到腾讯云

**执行内容**：
```cmd
tcb hosting deploy ./ / -e gdfztyjs-2gpucv007e6d0c87
```

**使用场景**：
- 首次部署
- 更新内容后重新部署
- 添加新试题后部署

---

### 2️⃣ 查看已部署文件.bat
**用途**：查看云端已上传的文件列表

**执行内容**：
```cmd
tcb hosting list -e gdfztyjs-2gpucv007e6d0c87
```

**使用场景**：
- 确认文件是否上传成功
- 检查文件是否完整
- 查看文件数量和大小

---

### 3️⃣ 删除所有文件.bat
**用途**：删除云端所有文件（谨慎使用！）

**执行内容**：
```cmd
tcb hosting delete / -e gdfztyjs-2gpucv007e6d0c87
```

**使用场景**：
- 重新部署前清空旧文件
- 测试环境清理
- ⚠️ 生产环境慎用！

---

## 💡 手动部署命令

### 完整部署（所有文件）
```cmd
tcb hosting deploy ./ / -e gdfztyjs-2gpucv007e6d0c87
```

### 部署单个文件夹（例如只部署2024年A卷）
```cmd
tcb hosting deploy "2024年A卷" "/2024年A卷" -e gdfztyjs-2gpucv007e6d0c87
```

### 部署单个文件（例如只更新index.html）
```cmd
tcb hosting deploy index.html /index.html -e gdfztyjs-2gpucv007e6d0c87
```

### 查看所有文件
```cmd
tcb hosting list -e gdfztyjs-2gpucv007e6d0c87
```

### 删除指定文件
```cmd
tcb hosting delete /index.html -e gdfztyjs-2gpucv007e6d0c87
```

### 删除指定文件夹
```cmd
tcb hosting delete "/2024年A卷" -e gdfztyjs-2gpucv007e6d0c87
```

---

## 📝 部署流程

### 首次部署

1. **准备文件**
   - 确保所有文件都在项目文件夹中
   - 检查 `index.html` 是否存在
   - 确认所有试题文件夹完整

2. **运行部署**
   ```cmd
   直接部署.bat
   ```

3. **等待上传**
   - 根据文件大小，可能需要 2-5 分钟
   - 进度条会显示上传进度

4. **访问网站**
   ```
   https://gdfztyjs-2gpucv007e6d0c87.tcloudbaseapp.com
   ```

5. **等待CDN刷新**
   - 首次访问可能需要 5-10 分钟
   - 如果看不到内容，稍等片刻再刷新

---

### 更新内容

当你修改了内容后：

1. **直接重新部署**
   ```cmd
   直接部署.bat
   ```

2. **或者只部署修改的文件**
   ```cmd
   # 如果只修改了 index.html
   tcb hosting deploy index.html /index.html -e gdfztyjs-2gpucv007e6d0c87
   
   # 如果只修改了某个试卷
   tcb hosting deploy "2024年A卷" "/2024年A卷" -e gdfztyjs-2gpucv007e6d0c87
   ```

3. **清除CDN缓存**（如果更新后看不到变化）
   - 访问 [CloudBase控制台](https://console.cloud.tencent.com/tcb)
   - 进入 "静态网站托管" → "设置"
   - 点击 "缓存配置" → "缓存刷新"

---

## ⚠️ 常见问题

### Q1: 提示 'tcb' 不是内部或外部命令

**原因**: 未安装腾讯云 CLI 工具

**解决**:
```cmd
npm install -g @cloudbase/cli
```

### Q2: 部署失败，提示权限不足

**原因**: 未登录或登录过期

**解决**:
```cmd
tcb login
# 或
cloudbase login
```

### Q3: 上传速度很慢

**原因**: 文件较多或网络较慢

**解决**:
- 使用有线网络
- 避开网络高峰期
- 分批上传文件夹

### Q4: 部署成功但网站无法访问

**可能原因**:
1. CDN 缓存未刷新 → 等待 5-10 分钟
2. 环境未开通静态托管 → 在控制台开通
3. index.html 未上传成功 → 检查文件列表

**检查方法**:
```cmd
查看已部署文件.bat
```

### Q5: 图片显示不出来

**检查步骤**:
1. 打开浏览器控制台 (F12)
2. 查看 Network 标签，看哪些图片 404
3. 确认对应文件夹是否已上传
4. 如果缺失，重新上传该文件夹

---

## 📊 文件大小和部署时间

- **项目总大小**: 约 50-100 MB
- **文件总数**: 约 300+ 个文件
- **首次部署时间**: 2-5 分钟（取决于网络）
- **增量部署时间**: 10-30 秒

---

## 🔧 高级用法

### 1. 批量部署指定年份

```cmd
REM 只部署 2024 年的试卷
tcb hosting deploy "2024年A卷" "/2024年A卷" -e gdfztyjs-2gpucv007e6d0c87
tcb hosting deploy "2024年B卷" "/2024年B卷" -e gdfztyjs-2gpucv007e6d0c87
```

### 2. 备份云端文件

虽然 `tcb` 命令没有直接的下载功能，但你可以：
- 在控制台手动下载
- 保持本地文件作为备份
- 使用 Git 进行版本管理

### 3. 使用环境变量

```cmd
REM 设置环境变量
set TCB_ENV_ID=gdfztyjs-2gpucv007e6d0c87

REM 部署（简化命令）
tcb hosting deploy ./ / -e %TCB_ENV_ID%
```

---

## 📞 获取帮助

### TCB CLI 帮助
```cmd
tcb -h                    # 查看所有命令
tcb hosting -h            # 查看 hosting 相关命令
tcb hosting deploy -h     # 查看 deploy 命令详情
```

### 在线文档
- 腾讯云文档: https://cloud.tencent.com/document/product/876
- CloudBase CLI: https://docs.cloudbase.net/cli/intro.html

---

## ✅ 快速检查清单

部署前：
- [ ] 文件准备完整
- [ ] 已安装 TCB CLI
- [ ] 已登录腾讯云
- [ ] 网络连接正常

部署后：
- [ ] 部署命令执行成功
- [ ] 运行 `查看已部署文件.bat` 确认
- [ ] 访问网站测试
- [ ] 测试所有功能
- [ ] 检查图片显示

---

**现在就试试吧！双击 `直接部署.bat` 开始部署！** 🚀

